{
  "version": 3,
  "sources": ["../../vuetify/src/components/VDialog/VDialog.tsx"],
  "sourcesContent": ["// Styles\nimport './VDialog.sass'\n\n// Components\nimport { VDialogTransition } from '@/components/transitions'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VOverlay } from '@/components/VOverlay'\n\n// Composables\nimport { makeTransitionProps } from '@/composables/transition'\nimport { useProxiedModel } from '@/composables/proxiedModel'\nimport { useScopeId } from '@/composables/scopeId'\nimport { forwardRefs } from '@/composables/forwardRefs'\n\n// Utilities\nimport { nextTick, ref, watch } from 'vue'\nimport { genericComponent, IN_BROWSER, useRender } from '@/util'\n\n// Types\nimport type { OverlaySlots } from '@/components/VOverlay/VOverlay'\n\nexport const VDialog = genericComponent<new () => {\n  $slots: OverlaySlots\n}>()({\n  name: 'VDialog',\n\n  inheritAttrs: false,\n\n  props: {\n    fullscreen: Boolean,\n    origin: {\n      type: String,\n      default: 'center center',\n    },\n    retainFocus: {\n      type: Boolean,\n      default: true,\n    },\n    scrollable: Boolean,\n    modelValue: Boolean,\n\n    ...makeTransitionProps({\n      transition: { component: VDialogTransition },\n    }),\n  },\n\n  emits: {\n    'update:modelValue': (value: boolean) => true,\n  },\n\n  setup (props, { attrs, slots }) {\n    const isActive = useProxiedModel(props, 'modelValue')\n    const { scopeId } = useScopeId()\n\n    const overlay = ref<VOverlay>()\n    function onFocusin (e: FocusEvent) {\n      const before = e.relatedTarget as HTMLElement | null\n      const after = e.target as HTMLElement | null\n\n      if (\n        before !== after &&\n        overlay.value?.contentEl &&\n        // We're the topmost dialog\n        overlay.value?.globalTop &&\n        // It isn't the document or the dialog body\n        ![document, overlay.value.contentEl].includes(after!) &&\n        // It isn't inside the dialog body\n        !overlay.value.contentEl.contains(after)\n      ) {\n        const focusable = [...overlay.value.contentEl.querySelectorAll(\n          'button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n        )].filter(el => !el.hasAttribute('disabled') && !el.matches('[tabindex=\"-1\"]')) as HTMLElement[]\n\n        if (!focusable.length) return\n\n        const firstElement = focusable[0]\n        const lastElement = focusable[focusable.length - 1]\n\n        if (before === firstElement) {\n          lastElement.focus()\n        } else {\n          firstElement.focus()\n        }\n      }\n    }\n\n    if (IN_BROWSER) {\n      watch(() => isActive.value && props.retainFocus, val => {\n        val\n          ? document.addEventListener('focusin', onFocusin)\n          : document.removeEventListener('focusin', onFocusin)\n      }, { immediate: true })\n    }\n\n    watch(isActive, async val => {\n      await nextTick()\n      if (val) {\n        overlay.value!.contentEl?.focus({ preventScroll: true })\n      } else {\n        overlay.value!.activatorEl?.focus({ preventScroll: true })\n      }\n    })\n\n    useRender(() => (\n      <VOverlay\n        v-model={ isActive.value }\n        class={[\n          'v-dialog',\n          {\n            'v-dialog--fullscreen': props.fullscreen,\n            'v-dialog--scrollable': props.scrollable,\n          },\n        ]}\n        transition={ props.transition }\n        scrollStrategy=\"block\"\n        ref={ overlay }\n        aria-role=\"dialog\"\n        aria-modal=\"true\"\n        activatorProps={{\n          'aria-haspopup': 'dialog',\n          'aria-expanded': String(isActive.value),\n        }}\n        z-index={ 2400 }\n        { ...scopeId }\n        { ...attrs }\n      >\n        {{\n          activator: slots.activator,\n          default: () => (\n            <VDefaultsProvider root>\n              { slots.default?.() }\n            </VDefaultsProvider>\n          ),\n        }}\n      </VOverlay>\n    ))\n\n    return forwardRefs({}, overlay)\n  },\n})\n\nexport type VDialog = InstanceType<typeof VDialog>\n"],
  "mappings": "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",
  "names": ["VDialog", "genericComponent", "name", "inheritAttrs", "props", "fullscreen", "Boolean", "origin", "type", "String", "default", "retainFocus", "scrollable", "modelValue", "makeTransitionProps", "transition", "component", "VDialogTransition", "emits", "value", "setup", "attrs", "slots", "isActive", "useProxiedModel", "scopeId", "useScopeId", "overlay", "ref", "onFocusin", "e", "before", "relatedTarget", "after", "target", "contentEl", "globalTop", "document", "includes", "contains", "focusable", "querySelectorAll", "filter", "el", "hasAttribute", "matches", "length", "firstElement", "lastElement", "focus", "IN_BROWSER", "watch", "val", "addEventListener", "removeEventListener", "immediate", "nextTick", "preventScroll", "activatorEl", "useRender", "activator", "forwardRefs"]
}
